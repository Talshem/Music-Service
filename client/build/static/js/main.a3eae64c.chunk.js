(this.webpackJsonpmusic_service=this.webpackJsonpmusic_service||[]).push([[0],{121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),c=a.n(l),u=(a(81),a(4)),s=a.n(u),i=a(9),o=a(7),m=(a(83),a(84),a(18)),f=a.n(m),p=a(8),d=a.n(p),E=a(41);var b=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)([]),m=Object(o.a)(u,2),f=m[0],p=m[1],b=Object(n.useState)([]),v=Object(o.a)(b,2),g=v[0],h=v[1],y=Object(n.useState)([]),x=Object(o.a)(y,2),O=x[0],k=x[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/top_songs");case 2:return e.next=4,e.sent.data.slice(0,20);case 4:return t=e.sent,e.next=7,d.a.get("/top_albums");case 7:return e.next=9,e.sent.data.slice(0,20);case 9:return a=e.sent,e.next=12,d.a.get("/top_artists");case 12:return e.next=14,e.sent.data.slice(0,20);case 14:return n=e.sent,e.next=17,d.a.get("/top_playlists");case 17:return e.next=19,e.sent.data.slice(0,20);case 19:r=e.sent,N(t,a,n,r);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var j=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("/count",{song_id:t.youtube_id,count:t.play_count+1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e,t,a,n){var l=e.map((function(e){return r.a.createElement("li",{key:e.youtube_id},r.a.createElement("p",null,e.title),r.a.createElement(E.a,{className:"video",onPlay:function(){return j(e)},videoId:e.youtube_id,id:"video",opts:{width:"150",height:"150"}}),r.a.createElement("br",null),r.a.createElement("br",null))})),u=t.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("p",null,e.name),r.a.createElement("img",{alt:e.name,width:"150",height:"150",src:e.cover_img}),r.a.createElement("br",null),r.a.createElement("br",null))})),s=a.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("p",null,e.name),r.a.createElement("img",{alt:e.name,width:"150",height:"150",src:e.cover_img}),r.a.createElement("br",null),r.a.createElement("br",null))})),i=n.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("p",null,e.name),r.a.createElement("img",{alt:e.name,width:"150",height:"150",src:e.cover_img}),r.a.createElement("br",null),r.a.createElement("br",null))}));c(l),p(u),h(s),k(i)};return r.a.createElement("div",null,r.a.createElement("h3",null,"Hello, ",e.user?e.user.name:"Guest"),r.a.createElement("div",{className:"lists"},r.a.createElement("div",null,r.a.createElement("h4",null," Top Songs "),r.a.createElement("ul",{className:"songs"},l)),r.a.createElement("div",null,r.a.createElement("h4",null," Top Albums "),r.a.createElement("ul",{className:"albums"},f)),r.a.createElement("div",null,r.a.createElement("h4",null,"Top Artists"),r.a.createElement("ul",{className:"artists"},g)),r.a.createElement("div",null,r.a.createElement("h4",null,"Top Playlists"),r.a.createElement("ul",{className:"playlists"},O))))},v=a(10),g=a(16),h=a(40);var y=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)([]),m=Object(o.a)(u,2),f=m[0],p=m[1],E=Object(n.useState)(null),b=Object(o.a)(E,2),g=b[0],y=b[1],x=Object(n.useState)(null),O=Object(o.a)(x,2),k=O[0],j=O[1];function N(e){return!!/^([0-5]?[0-9]|2[0-3]):[0-5][0-9]$/.test(e)}Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,d.a.get("/top_albums");case 3:return e.next=5,e.sent.data;case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=p,e.next=10,d.a.get("/top_artists");case 10:return e.next=12,e.sent.data;case 12:e.t3=e.sent,(0,e.t2)(e.t3);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var w=function(){var t=Object(i.a)(s.a.mark((function t(a,n,r,l,c,u,i,o){var m,f,p,E,b;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==k){t.next=2;break}return t.abrupt("return",document.getElementById("songError").innerHTML="Select an artist");case 2:if(null!==g){t.next=4;break}return t.abrupt("return",document.getElementById("songError").innerHTML="Select an album");case 4:if(m=o.slice(0,10),f=i.replace("'","''"),p=a.replace("'","''"),E=l.replace("'","''"),b=c.replace("'","''"),e.user){t.next=11;break}return t.abrupt("return",document.getElementById("songError").innerHTML="Only registered users can post new songs to the website!");case 11:if(N(n)){t.next=13;break}return t.abrupt("return",document.getElementById("songError").innerHTML="Length form is invalid");case 13:if(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/.test(m)){t.next=15;break}return t.abrupt("return",document.getElementById("songError").innerHTML="Release date form is invalid");case 15:if(/^[1-9]\d{0,1}(?:,\d{1,3})?$/.test(u)){t.next=17;break}return t.abrupt("return",document.getElementById("songError").innerHTML="Track number field must be a number");case 17:return t.prev=17,t.next=20,d.a.post("/song",{title:p,length:n,youtube_id:r,artist:E,album:b,track_number:u,lyrics:f,created_at:m});case 20:document.getElementById("songForm").reset(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(17),document.getElementById("songError").innerHTML="Song already exists";case 26:case 27:case"end":return t.stop()}}),t,null,[[17,23]])})));return function(e,a,n,r,l,c,u,s){return t.apply(this,arguments)}}();return r.a.createElement("div",null,function(){var e,t,a,n,c,u,s=f.map((function(e){return{value:e.name,label:e.name}})),i=l.map((function(e){return{value:e.name,label:e.name}}));return r.a.createElement("form",{id:"songForm",className:"songForm",onSubmit:function(){return w(e,a,t,k,g,n,c,u)}},r.a.createElement("div",null,r.a.createElement("label",null," Name of the song: "),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:e,onChange:function(t){e=t.target.value}})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Youtube ID: "),r.a.createElement("i",{className:"tooltip fas fa-info"}," ",r.a.createElement("span",{className:"tooltiptext"},"youtube.com/watch?v= (Youtube_ID)")),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:t,onChange:function(e){t=e.target.value}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null," Length: "),r.a.createElement("i",{className:"tooltip fas fa-info"}," ",r.a.createElement("span",{className:"tooltiptext"},"M M : S S")),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:a,onChange:function(e){a=e.target.value}})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Artist: "),r.a.createElement("br",null),r.a.createElement(h.a,{required:!0,maxMenuHeight:160,defaultValue:k,onChange:j,options:s}),r.a.createElement("br",null),r.a.createElement("label",null," Album: "),r.a.createElement("br",null),r.a.createElement(h.a,{required:!0,maxMenuHeight:160,defaultValue:g,onChange:y,options:i}),r.a.createElement("br",null),r.a.createElement("label",null," Track number: "),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:n,onChange:function(e){n=e.target.value}}),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement("label",null," Lyrics: "),r.a.createElement("br",null),r.a.createElement("textarea",{rows:"12",required:!0,type:"text",defaultValue:c,onChange:function(e){c=e.target.value}})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null," Release date: "),r.a.createElement("i",{class:"tooltip fas fa-info"}," ",r.a.createElement("span",{class:"tooltiptext"},"Y Y Y Y - M M - D D")),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:u,onChange:function(e){u=e.target.value}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",className:"post",value:"Post Song"})))}(),r.a.createElement(v.a,null,r.a.createElement(v.b,{className:"fa fa-arrow-left back",to:"/Songs"})),r.a.createElement("p",{id:"songError",style:{marginTop:"10px",marginLeft:"20px",fontSize:"20px",color:"red"}}))};var x=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),f=m[0],p=m[1],b=Object(n.useState)("[]"),h=Object(o.a)(b,2),x=h[0],O=h[1],k=Object(n.useState)(0),j=Object(o.a)(k,2),N=j[0],w=j[1],S=Object(n.useState)(!1),_=Object(o.a)(S,2),C=_[0],I=_[1],T=Object(n.useState)(!1),L=Object(o.a)(T,2),M=L[0],A=L[1],P=Object(n.useState)(!1),B=Object(o.a)(P,2),q=B[0],H=B[1];Object(n.useEffect)((function(){(function(){var t=Object(i.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/preferences/".concat(e.user.email));case 3:a=t.sent,n=a.data,O(n[0].preferences),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[q]),Object(n.useEffect)((function(){if(e.user){var t=e.user.is_admin;w(t)}}),[e.user]),Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(x),e.next=3,d.a.get("/top_songs");case 3:return e.next=5,e.sent.data;case 5:a=e.sent,n=a.filter((function(e){return e.title.toUpperCase().includes(f.toUpperCase())})),M?(r=n.filter((function(e){return t.includes("song: ".concat(e.youtube_id))})),Y(r)):Y(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[M,f,C,x]);var F=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.youtube_id.replace("'","''"),e.next=3,d.a.delete("/song/".concat(a));case 3:I(!C);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("/count",{song_id:t.youtube_id,count:t.play_count+1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var t=Object(i.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=JSON.parse(x)).includes("song: ".concat(a.youtube_id))){t.next=7;break}return t.next=4,d.a.put("/song/like",{toggle:"unlike",is_liked:a.is_liked-1,preferences:n,user:e.user.email,youtube_id:a.youtube_id});case 4:H(!q),t.next=10;break;case 7:return t.next=9,d.a.put("/song/like",{toggle:"like",is_liked:a.is_liked+1,user:e.user.email,youtube_id:a.youtube_id});case 9:H(!q);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(t){var a=JSON.parse(x),n=t.map((function(t){var n=a.includes("song: ".concat(t.youtube_id))?r.a.createElement("i",{className:"fas fa-heart"}):r.a.createElement("i",{className:"far fa-heart"}),l=e.user?n:"",c=1===N?r.a.createElement("button",{style:{marginTop:"20px"},onClick:function(){return F(t)},className:"deleteButton"},"Delete"):"";return r.a.createElement("li",{key:t.youtube_id,className:"grid-item"},r.a.createElement("p",null,r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return J(t)}},l)," ",t.title),r.a.createElement(E.a,{className:"video",onPlay:function(){return V(t)},videoId:t.youtube_id,id:"video",opts:{width:"150",height:"150"}}),c)}));c(n)},z=M?r.a.createElement("i",{className:"fas fa-heart"}):r.a.createElement("i",{className:"far fa-heart"});return r.a.createElement("div",null,r.a.createElement("p",{className:"listTitle"},"Songs"),r.a.createElement("input",{className:"filterList",placeholder:"Search...",onChange:function(e){return p(e.target.value)}}),r.a.createElement(v.a,null,e.user?r.a.createElement(v.b,{className:"fa fa-plus-square-o add",to:"/PostSong"}):"",r.a.createElement(g.a,{path:"/PostSong",component:function(){return r.a.createElement(y,null)}})),r.a.createElement("i",{className:"filterFavorites",onClick:function(){return A(!M)}},z),r.a.createElement("ul",{className:"grid-container"},l))};var O=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),f=m[0],p=m[1],E=Object(n.useState)("[]"),b=Object(o.a)(E,2),g=b[0],h=b[1],y=Object(n.useState)(0),x=Object(o.a)(y,2),O=x[0],k=x[1],j=Object(n.useState)(!1),N=Object(o.a)(j,2),w=N[0],S=N[1],_=Object(n.useState)(!1),C=Object(o.a)(_,2),I=C[0],T=C[1],L=Object(n.useState)(!1),M=Object(o.a)(L,2),A=M[0],P=M[1];Object(n.useEffect)((function(){(function(){var t=Object(i.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/preferences/".concat(e.user.email));case 3:a=t.sent,n=a.data,h(n[0].preferences),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[A]),Object(n.useEffect)((function(){if(e.user){var t=e.user.is_admin;k(t)}}),[e.user]),Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(g),e.next=3,d.a.get("/top_artists");case 3:return e.next=5,e.sent.data;case 5:a=e.sent,n=a.filter((function(e){return e.name.toUpperCase().includes(f.toUpperCase())})),I?(r=n.filter((function(e){return t.includes("artist: ".concat(e.name))})),H(r)):H(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[I,f,w,g]);var B=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name.replace("'","''"),e.next=3,d.a.delete("/artist/".concat(a));case 3:S(!w);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var t=Object(i.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=JSON.parse(g)).includes("artist: ".concat(a.name))){t.next=7;break}return t.next=4,d.a.put("/artist/like",{toggle:"unlike",is_liked:a.is_liked-1,preferences:n,user:e.user.email,name:a.name});case 4:P(!A),t.next=10;break;case 7:return t.next=9,d.a.put("/artist/like",{toggle:"like",is_liked:a.is_liked+1,user:e.user.email,name:a.name});case 9:P(!A);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(t){var a=JSON.parse(g),n=t.map((function(t){var n=a.includes("artist: ".concat(t.name))?r.a.createElement("i",{className:"fas fa-heart"}):r.a.createElement("i",{className:"far fa-heart"}),l=e.user?n:"",c=1===O?r.a.createElement("button",{onClick:function(){return B(t)},className:"deleteButton"},"Delete"):"";return r.a.createElement("li",{key:t.name,className:"grid-item"},r.a.createElement("p",null,r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return q(t)}},l," "),t.name),r.a.createElement("img",{alt:t.name,width:"150",height:"150",src:t.cover_img}),c)}));c(n)},F=I?r.a.createElement("i",{className:"fas fa-heart"}):r.a.createElement("i",{className:"far fa-heart"});return r.a.createElement("div",null,r.a.createElement("p",{className:"listTitle"},"Artists"),r.a.createElement("input",{className:"filterList",placeholder:"Search...",onChange:function(e){return p(e.target.value)}}),r.a.createElement(v.a,null,e.user?r.a.createElement(v.b,{className:"fa fa-plus-square-o add",to:"/PostArtist"}):""),r.a.createElement("i",{className:"filterFavorites",onClick:function(){return T(!I)}},F),r.a.createElement("ul",{className:"grid-container"},l))};var k=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),f=m[0],p=m[1],E=Object(n.useState)("[]"),b=Object(o.a)(E,2),g=b[0],h=b[1],y=Object(n.useState)(0),x=Object(o.a)(y,2),O=x[0],k=x[1],j=Object(n.useState)(!1),N=Object(o.a)(j,2),w=N[0],S=N[1],_=Object(n.useState)(!1),C=Object(o.a)(_,2),I=C[0],T=C[1],L=Object(n.useState)(!1),M=Object(o.a)(L,2),A=M[0],P=M[1];Object(n.useEffect)((function(){(function(){var t=Object(i.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/preferences/".concat(e.user.email));case 3:a=t.sent,n=a.data,h(n[0].preferences),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[A]),Object(n.useEffect)((function(){if(e.user){var t=e.user.is_admin;k(t)}}),[e.user]),Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(g),e.next=3,d.a.get("/top_playlists");case 3:return e.next=5,e.sent.data;case 5:a=e.sent,n=a.filter((function(e){return e.name.toUpperCase().includes(f.toUpperCase())})),I?(r=n.filter((function(e){return t.includes("playlist: ".concat(e.id))})),H(r)):H(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[I,f,w,g]);var B=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name.replace("'","''"),e.next=3,d.a.delete("/playlist/".concat(a));case 3:S(!w);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var t=Object(i.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=JSON.parse(g),!g.includes("playlist: ".concat(a.id))){t.next=7;break}return t.next=4,d.a.put("/playlist/like",{toggle:"unlike",is_liked:a.is_liked-1,preferences:n,user:e.user.email,id:a.id});case 4:P(!A),t.next=10;break;case 7:return t.next=9,d.a.put("/playlist/like",{toggle:"like",is_liked:a.is_liked+1,user:e.user.email,id:a.id});case 9:P(!A);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(t){var a=JSON.parse(g),n=t.map((function(t){var n=a.includes("playlist: ".concat(t.id))?r.a.createElement("i",{className:"fas fa-heart"}):r.a.createElement("i",{className:"far fa-heart"}),l=e.user?n:"",c=1===O?r.a.createElement("button",{onClick:function(){return B(t)},className:"deleteButton"},"Delete"):"";return r.a.createElement("li",{key:t.name,className:"grid-item"},r.a.createElement("p",null,r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return q(t)}},l," "),t.name),r.a.createElement("img",{alt:t.name,width:"150",height:"150",src:t.cover_img}),c)}));c(n)},F=I?r.a.createElement("i",{className:"fas fa-heart"}):r.a.createElement("i",{className:"far fa-heart"});return r.a.createElement("div",null,r.a.createElement("p",{className:"listTitle"},"Playlists"),r.a.createElement("input",{className:"filterList",placeholder:"Search...",onChange:function(e){return p(e.target.value)}}),r.a.createElement(v.a,null,e.user?r.a.createElement(v.b,{className:"fa fa-plus-square-o add",to:"/PostPlaylist"}):""),r.a.createElement("i",{className:"filterFavorites",onClick:function(){return T(!I)}},F),r.a.createElement("ul",{className:"grid-container"},l))};var j=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),f=m[0],p=m[1],E=Object(n.useState)("[]"),b=Object(o.a)(E,2),g=b[0],h=b[1],y=Object(n.useState)(0),x=Object(o.a)(y,2),O=x[0],k=x[1],j=Object(n.useState)(!1),N=Object(o.a)(j,2),w=N[0],S=N[1],_=Object(n.useState)(!1),C=Object(o.a)(_,2),I=C[0],T=C[1],L=Object(n.useState)(!1),M=Object(o.a)(L,2),A=M[0],P=M[1];Object(n.useEffect)((function(){(function(){var t=Object(i.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/preferences/".concat(e.user.email));case 3:a=t.sent,n=a.data,h(n[0].preferences),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[A]),Object(n.useEffect)((function(){if(e.user){var t=e.user.is_admin;k(t)}}),[e.user]),Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(g),e.next=3,d.a.get("/top_albums");case 3:return e.next=5,e.sent.data;case 5:a=e.sent,n=a.filter((function(e){return e.name.toUpperCase().includes(f.toUpperCase())})),I?(r=n.filter((function(e){return t.includes("album: ".concat(e.name))})),H(r)):H(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[I,f,w,g]);var B=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name.replace("'","''"),e.next=3,d.a.delete("/album/".concat(a));case 3:S(!w);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var t=Object(i.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=JSON.parse(g)).includes("album: ".concat(a.name))){t.next=7;break}return t.next=4,d.a.put("/album/like",{toggle:"unlike",is_liked:a.is_liked-1,preferences:n,user:e.user.email,name:a.name});case 4:P(!A),t.next=10;break;case 7:return t.next=9,d.a.put("/album/like",{toggle:"like",is_liked:a.is_liked+1,user:e.user.email,name:a.name});case 9:P(!A);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(t){var a=JSON.parse(g),n=t.map((function(t){var n=a.includes("album: ".concat(t.name))?r.a.createElement("i",{className:"fas fa-heart"}):r.a.createElement("i",{className:"far fa-heart"}),l=e.user?n:"",c=1===O?r.a.createElement("button",{onClick:function(){return B(t)},className:"deleteButton"},"Delete"):"";return r.a.createElement("li",{key:t.name,className:"grid-item"},r.a.createElement("p",null,r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return q(t)}},l," "),t.name),r.a.createElement("img",{alt:t.name,width:"150",height:"150",src:t.cover_img}),c)}));c(n)},F=I?r.a.createElement("i",{className:"fas fa-heart"}):r.a.createElement("i",{className:"far fa-heart"});return r.a.createElement("div",null,r.a.createElement("p",{className:"listTitle"},"Albums"),r.a.createElement("input",{className:"filterList",placeholder:"Search...",onChange:function(e){return p(e.target.value)}}),r.a.createElement(v.a,null,e.user?r.a.createElement(v.b,{className:"fa fa-plus-square-o add",to:"/PostAlbum"}):""),r.a.createElement("i",{className:"filterFavorites",onClick:function(){return T(!I)}},F),r.a.createElement("ul",{className:"grid-container"},l))},N=a(162),w=a(165),S=a(161),_=a(160),C=a(166),I=a(163);var T=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(null),m=Object(o.a)(u,2),f=m[0],p=m[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,d.a.get("/top_artists");case 3:return e.next=5,e.sent.data;case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var E=function(){var t=Object(i.a)(s.a.mark((function t(a,n,r,l){var c,u,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=l.slice(0,10),/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/.test(c)){t.next=3;break}return t.abrupt("return",document.getElementById("albumError").innerHTML="Release date form is invalid");case 3:if(e.user){t.next=5;break}return t.abrupt("return",document.getElementById("albumError").innerHTML="Only registered users can post new albums to the website!");case 5:return u=a.replace("'","''"),i=r.replace("'","''"),t.prev=7,t.next=10,d.a.post("/album",{name:u,artist:i,cover_img:n,created_at:c});case 10:document.getElementById("albumForm").reset(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),document.getElementById("albumError").innerHTML="Album already exists";case 16:case 17:case"end":return t.stop()}}),t,null,[[7,13]])})));return function(e,a,n,r){return t.apply(this,arguments)}}();return r.a.createElement("div",null,function(){var e,t,a,n=l.map((function(e){return{value:e.name,label:e.name}}));return r.a.createElement("form",{id:"albumForm",className:"albumForm",onSubmit:function(){return E(e,t,f,a)}},r.a.createElement("div",null,r.a.createElement("label",null," Name of the Album: "),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",id:"title",defaultValue:e,onChange:function(t){e=t.target.value}})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Artist: "),r.a.createElement("br",null),r.a.createElement(h.a,{style:{},required:!0,maxMenuHeight:160,defaultValue:f,onChange:p,options:n}),r.a.createElement("br",null),r.a.createElement("label",null," Cover image URL "),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:t,onChange:function(e){t=e.target.value}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null," Release date: "),r.a.createElement("i",{class:"tooltip fas fa-info"}," ",r.a.createElement("span",{class:"tooltiptext"},"Y Y Y Y - M M - D D")),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:a,onChange:function(e){a=e.target.value}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",style:{left:"410px"},className:"post",value:"Post Album"})))}(),r.a.createElement(v.a,null,r.a.createElement(v.b,{className:"fa fa-arrow-left back",style:{left:"84px"},to:"/Albums"})),r.a.createElement("p",{id:"albumError",style:{marginTop:"0px",marginLeft:"130px",fontSize:"20px",color:"red"}}))};var L=function(e){var t=function(){var e=Object(i.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.replace("'","''"),e.prev=1,e.next=4,d.a.post("/artist",{name:n,cover_img:a});case 4:document.getElementById("artistForm").reset(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),document.getElementById("artistError").innerHTML="Artist already exists";case 10:case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,function(){var e,a;return r.a.createElement("form",{id:"artistForm",className:"artistForm",onSubmit:function(){return t(e,a)}},r.a.createElement("div",null,r.a.createElement("label",null," Name of the Artist: "),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:e,onChange:function(t){e=t.target.value}})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null," Artist image URL "),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:a,onChange:function(e){a=e.target.value}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",style:{left:"418px"},className:"post",value:"Post Artist"})))}(),r.a.createElement(v.a,null,r.a.createElement(v.b,{className:"fa fa-arrow-left back",style:{left:"83px"},to:"/Artists"})),r.a.createElement("p",{id:"artistError",style:{marginTop:"-2px",marginLeft:"120px",fontSize:"20px",color:"red"}}))};var M=function(e){var t=function(){var t=Object(i.a)(s.a.mark((function t(a,n,r,l){var c,u,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=l.slice(0,10),/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/.test(c)){t.next=3;break}return t.abrupt("return",document.getElementById("playlistError").innerHTML="Release date form is invalid");case 3:if(e.user){t.next=5;break}return t.abrupt("return",document.getElementById("playlistError").innerHTML="Only registered users can post new playlists to the website!");case 5:return u=a.replace("'","''"),i=n.replace("'","''"),t.prev=7,t.next=10,d.a.post("/playlist",{name:u,songs:[i],cover_img:r,created_at:c});case 10:document.getElementById("playlistForm").reset(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),document.getElementById("playlistError").innerHTML="Undetected error";case 16:case 17:case"end":return t.stop()}}),t,null,[[7,13]])})));return function(e,a,n,r){return t.apply(this,arguments)}}();return r.a.createElement("div",null,function(){var e,a,n,l;return r.a.createElement("form",{id:"playlistForm",className:"playlistForm",onSubmit:function(){return t(e,a,n,l)}},r.a.createElement("div",null,r.a.createElement("label",null," Name of the Playlist: "),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:e,onChange:function(t){e=t.target.value}})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null," Songs: "),r.a.createElement("i",{class:"tooltip fas fa-info"}," ",r.a.createElement("span",{className:"tooltiptext"},"Add a comma after every song")),r.a.createElement("br",null),r.a.createElement("textarea",{rows:"5",required:!0,type:"text",defaultValue:a,onChange:function(e){a=e.target.value}})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null," Cover image URL "),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:n,onChange:function(e){n=e.target.value}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null," Release date: "),r.a.createElement("i",{class:"tooltip fas fa-info"}," ",r.a.createElement("span",{className:"tooltiptext"},"Y Y Y Y - M M - D D")),r.a.createElement("br",null),r.a.createElement("input",{required:!0,type:"text",defaultValue:l,onChange:function(e){l=e.target.value}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",style:{left:"400px"},className:"post",value:"Post Playlist"})))}(),r.a.createElement(v.a,null,r.a.createElement(v.b,{className:"fa fa-arrow-left back",style:{left:"83px"},to:"/Playlists"})),r.a.createElement("p",{id:"playlistError",style:{marginTop:"-2px",marginLeft:"120px",fontSize:"20px",color:"red"}}))};var A=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),u=Object(o.a)(c,2),p=u[0],E=u[1],h=Object(n.useState)(void 0),A=Object(o.a)(h,2),P=A[0],B=A[1];Object(n.useEffect)((function(){var e=localStorage.getItem("email");(function(){var t=Object(i.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/auto/".concat(e));case 3:a=t.sent,n=a.data,setTimeout((function(){B(n[0])}),500),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[]);var q=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("/logout",{email:P.email});case 2:B(void 0),localStorage.clear();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function H(e){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)}var F=function(){var e=Object(i.a)(s.a.mark((function e(t,a,n,r){var c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!H(t)){e.next=14;break}if(n!==r){e.next=11;break}return e.next=5,d.a.post("/users",{name:a,email:t,password:n});case 5:c=e.sent,u=c.data,B(u[0]),l(!1),e.next=12;break;case 11:document.getElementById("errorMessage").innerHTML="Password fields do not match";case 12:e.next=15;break;case 14:document.getElementById("errorMessage").innerHTML="Please enter a valid email address";case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),document.getElementById("errorMessage").innerHTML="The email you tried to register with is already in use";case 20:case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(s.a.mark((function e(t,a){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!H(t)){e.next=11;break}return e.next=4,d.a.put("/users",{email:t,password:a});case 4:n=e.sent,r=n.data,localStorage.setItem("email",t),E(!1),setTimeout((function(){B(r[0])}),500),e.next=12;break;case 11:document.getElementById("errorMessage").innerHTML="Please enter a valid email address";case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),document.getElementById("errorMessage").innerHTML="Either the email or password you entered is incorrect";case 17:case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),J=r.a.createElement(I.a,{style:{marginLeft:"85px"},variant:"text",color:"inherit",onClick:q},"Logout"),Y=P?r.a.createElement("h5",null," ",J," "):r.a.createElement("h5",null," ",function(){var e,t;return r.a.createElement("span",null,r.a.createElement(I.a,{variant:"text",color:"inherit",onClick:function(){return E(!0)}},"Login"),r.a.createElement(w.a,{open:p,onClose:function(){return E(!1)},"aria-labelledby":"form-dialog-title"},r.a.createElement(C.a,{id:"form-dialog-title"},"Login"),r.a.createElement(_.a,null,r.a.createElement(N.a,{onChange:function(t){e=t.target.value},defaultValue:e,autoFocus:!0,margin:"dense",id:"name",label:"Email Address",type:"email",required:!0,fullWidth:!0}),r.a.createElement(N.a,{onChange:function(e){t=e.target.value},autoFocus:!0,defaultValue:t,margin:"dense",id:"password",label:"Password",type:"password",required:!0,fullWidth:!0})),r.a.createElement(C.a,{style:{color:"red"},id:"errorMessage"}),r.a.createElement(S.a,null,r.a.createElement(I.a,{type:"submit",onClick:function(){return E(!1)},color:"primary"},"Cancel"),r.a.createElement(I.a,{onClick:function(){return V(e,t)},color:"primary"},"login"))))}()," | ",function(){var e,t,n,c;return r.a.createElement("span",null,r.a.createElement(I.a,{variant:"text",color:"inherit",onClick:function(){return l(!0)}},"Register"),r.a.createElement(w.a,{open:a,onClose:function(){return l(!1)},"aria-labelledby":"form-dialog-title"},r.a.createElement(C.a,{id:"form-dialog-title"},"Register"),r.a.createElement(_.a,null,r.a.createElement(N.a,{onChange:function(t){e=t.target.value},autoFocus:!0,margin:"dense",id:"email",label:"Email Address",type:"email",fullWidth:!0}),r.a.createElement(N.a,{onChange:function(e){t=e.target.value},autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"name",fullWidth:!0}),r.a.createElement(N.a,{onChange:function(e){n=e.target.value},autoFocus:!0,margin:"dense",id:"password",label:"Password",type:"password",fullWidth:!0}),r.a.createElement(N.a,{onChange:function(e){c=e.target.value},autoFocus:!0,margin:"dense",id:"rePassword",label:"Confirm password",type:"password",fullWidth:!0})),r.a.createElement(C.a,{style:{color:"red"},id:"errorMessage"}),r.a.createElement(S.a,null,r.a.createElement(I.a,{onClick:function(){return l(!1)},color:"primary"},"Cancel"),r.a.createElement(I.a,{onClick:function(){return F(e,t,n,c)},color:"primary"},"Register"))))}()," ");return r.a.createElement("div",{className:"App"},Y,r.a.createElement(v.a,null,r.a.createElement(f.a,{className:"sideNav",expanded:!0,onToggle:function(){}},r.a.createElement(f.a.Toggle,null),r.a.createElement(f.a.Nav,{defaultSelected:"home"},r.a.createElement(m.NavItem,{eventKey:"home"},r.a.createElement(m.NavIcon,null,r.a.createElement("i",{style:{fontSize:"1.75em"}})),r.a.createElement(v.b,{to:"/"},r.a.createElement("i",{style:{color:"white",fontSize:"44px",paddingTop:"3px"},className:"fa fa-fw fa-home"}))),r.a.createElement(m.NavItem,{eventKey:"1"},r.a.createElement(m.NavIcon,null,r.a.createElement("i",{className:"fa fa-fw ",style:{fontSize:"1.75em"}})),r.a.createElement(m.NavText,null,r.a.createElement(v.b,{className:"navItem",to:"/Songs"},"Songs"))),r.a.createElement(m.NavItem,{eventKey:"2"},r.a.createElement(m.NavIcon,null,r.a.createElement("i",{className:"fa fa-fw ",style:{fontSize:"1.75em"}})),r.a.createElement(m.NavText,null,r.a.createElement(v.b,{className:"navItem",to:"/Albums"},"Albums"))),r.a.createElement(m.NavItem,{eventKey:"3"},r.a.createElement(m.NavIcon,null,r.a.createElement("i",{className:"fa fa-fw ",style:{fontSize:"1.75em"}})),r.a.createElement(m.NavText,null,r.a.createElement(v.b,{className:"navItem",to:"/Artists"},"Artists"))),r.a.createElement(m.NavItem,{eventKey:"4"},r.a.createElement(m.NavIcon,null,r.a.createElement("i",{className:"fa fa-fw ",style:{fontSize:"1.75em"}})),r.a.createElement(m.NavText,null,r.a.createElement(v.b,{className:"navItem",to:"/Playlists"},"Playlists"))))),r.a.createElement(g.a,{exact:!0,path:"/",component:function(){return r.a.createElement(b,{user:P})}}),r.a.createElement(g.a,{path:"/Songs",component:function(){return r.a.createElement(x,{user:P})}}),r.a.createElement(g.a,{path:"/Artists",component:function(){return r.a.createElement(O,{user:P})}}),r.a.createElement(g.a,{path:"/Playlists",component:function(){return r.a.createElement(k,{user:P})}}),r.a.createElement(g.a,{path:"/Albums",component:function(){return r.a.createElement(j,{user:P})}}),r.a.createElement(g.a,{path:"/PostSong",component:function(){return r.a.createElement(y,{user:P})}}),r.a.createElement(g.a,{path:"/PostAlbum",component:function(){return r.a.createElement(T,{user:P})}}),r.a.createElement(g.a,{path:"/PostArtist",component:function(){return r.a.createElement(L,{user:P})}}),r.a.createElement(g.a,{path:"/PostPlaylist",component:function(){return r.a.createElement(M,{user:P})}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t,a){e.exports=a(121)},81:function(e,t,a){},83:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.a3eae64c.chunk.js.map